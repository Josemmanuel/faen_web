<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Contacto - FAEN</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .contacto-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .contacto-container h2 {
            border-bottom: 3px solid #007bff;
            padding-bottom: 10px;
            margin-bottom: 20px;
            color: #333;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: bold;
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: Arial, sans-serif;
            font-size: 0.95rem;
            box-sizing: border-box;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 5px rgba(0,123,255,0.3);
        }

        .btn-submit {
            background-color: #007bff;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: background-color 0.3s ease;
        }

        .btn-submit:hover {
            background-color: #0056b3;
        }

        .success-message {
            background-color: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            display: none;
        }

        .error-message {
            background-color: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            display: none;
        }
    </style>
</head>
<body>
    <header>
        <img src="images/faenlogo.png" alt="Logo FAEN" class="logo">
        <h1>Contacto</h1>
        <button class="menu-toggle" id="menu-toggle">‚ò∞</button>
        <nav id="navbar-menu">
            <ul>
                <li><a href="index.html"><span class="nav-icon">üè†</span> Inicio</a></li>
                <li><a href="help-guide.html"><span class="nav-icon">‚ùì</span> Gu√≠a</a></li>
                <li><a href="carreras.html"><span class="nav-icon">üéì</span> Carreras</a></li>
                <li><a href="autoridades.html"><span class="nav-icon">üëî</span> Autoridades</a></li>
                <li><a href="contacto.html"><span class="nav-icon">üìû</span> Contacto</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle"><span class="nav-icon">üìö</span> Claustro <span class="dropdown-arrow">‚ñº</span></a>
                    <ul class="dropdown-menu" id="claustro-dropdown">
                        <!-- Los claustros se cargar√°n din√°micamente aqu√≠ -->
                    </ul>
                </li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="contacto-container">
            <h2>üìß Enviar Mensaje</h2>
            <div id="success-msg" class="success-message">Mensaje enviado correctamente. Nos pondremos en contacto pronto.</div>
            <div id="error-msg" class="error-message"></div>
            <form id="contacto-form">
                <div class="form-group">
                    <label for="nombre">Nombre *</label>
                    <input type="text" id="nombre" name="nombre" required>
                </div>
                <div class="form-group">
                    <label for="email">Email *</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="telefono">Tel√©fono</label>
                    <input type="tel" id="telefono" name="telefono">
                </div>
                <div class="form-group">
                    <label for="asunto">Asunto *</label>
                    <input type="text" id="asunto" name="asunto" required>
                </div>
                <div class="form-group">
                    <label for="mensaje">Mensaje *</label>
                    <textarea id="mensaje" name="mensaje" required></textarea>
                </div>
                <button type="submit" class="btn-submit">Enviar Mensaje</button>
            </form>
        </section>
    </main>

    <footer>
        <p>&copy; 2026 Facultad de Administraci√≥n, Econom√≠a y Negocios</p>
    </footer>

    <script src="js/app.js"></script>
    <script>
        // Esperar a que el DOM est√© completamente cargado
        document.addEventListener('DOMContentLoaded', () => {
            // Enviar formulario de contacto
            const form = document.getElementById('contacto-form');
            if (!form) {
                console.error('Formulario de contacto no encontrado');
                return;
            }

            form.addEventListener('submit', async (e) => {
                e.preventDefault();

                const nombre = document.getElementById('nombre').value;
                const email = document.getElementById('email').value;
                const telefono = document.getElementById('telefono').value;
                const asunto = document.getElementById('asunto').value;
                const mensaje = document.getElementById('mensaje').value;

                console.log('Datos del formulario:', { nombre, email, telefono, asunto, mensaje });

                try {
                    const res = await fetch('/api/mensajes', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            nombre,
                            email,
                            telefono,
                            asunto,
                            mensaje
                        })
                    });

                    console.log('Respuesta del servidor:', res.status, res.statusText);

                    if (res.ok) {
                        const respuestaJson = await res.json();
                        console.log('Mensaje guardado:', respuestaJson);
                        document.getElementById('success-msg').style.display = 'block';
                        form.reset();
                        setTimeout(() => {
                            document.getElementById('success-msg').style.display = 'none';
                        }, 5000);
                    } else {
                        const err = await res.text();
                        console.error('Error en respuesta:', err);
                        document.getElementById('error-msg').textContent = 'Error: ' + err;
                        document.getElementById('error-msg').style.display = 'block';
                        setTimeout(() => {
                            document.getElementById('error-msg').style.display = 'none';
                        }, 5000);
                    }
                } catch (error) {
                    console.error('Error:', error);
                    document.getElementById('error-msg').textContent = 'Error al enviar: ' + error.message;
                    document.getElementById('error-msg').style.display = 'block';
                }
            });
        });
    </script>
</body>
</html>
